# Epic 2 Retrospective: Portfolio Shell & Navigation

**Date:** 2026-02-19
**Participants:** Nicolas (Project Lead), Bob (Scrum Master), Alice (Product Owner), Charlie (Senior Dev), Dana (QA), Elena (Junior Dev)
**Epic Status:** In Progress (extended with Stories 2.5 + 2.6)
**Retrospective Status:** Complete

---

## Executive Summary

Epic 2 delivered all 4 planned stories (100% completion) with all acceptance criteria met. The portfolio now has a functional shell: nav with blur-on-scroll, data-driven hero, reusable section headings, and a clean typography-first footer. Build validation passed consistently, deployment pipeline runs smoothly.

**Two significant discoveries during retrospective:**

1. **Visual gap identified:** The current Hugo render doesn't match the HTML mockup that drove the DESIGN-SPEC. Spacing, placeholder content, and overall density need polish before the shell can be considered "finished." Two new stories (2.5, 2.6) added to Epic 2.

2. **Naming evolution: `pearl` → `block`.** Nicolas identified that the "pearl" metaphor (linear, sequential necklace) limits the conceptual model. "Block" (Lego, Minecraft, voxels) better captures how knowledge compounds in 3D — the more blocks you have, the more options and potential combinations. This affects 371 occurrences across 19 files and must be completed before Epic 3.

---

## Epic 2 Delivery Summary

### Metrics

**Delivery Performance:**
- Stories completed: 4/4 planned (100%)
- Stories added during retro: 2 (2.5 rename, 2.6 visual polish)
- Build validation: Hugo passes with 11 pages, 0 errors, ~55ms
- Deployment: Netlify pipeline running, localhost:1313 preview workflow confirmed
- Models used: Opus 4.6 (Stories 2.1, 2.2, 2.3), Haiku 4.5 (Story 2.4)

**Quality:**
- Code reviews run on all 4 stories
- Story 2.2: 4 HIGH accessibility issues found and fixed (aria-controls, escape key, focus-visible, mobile menu close)
- Story 2.3: Post-review fixes expanded scope (nav positioning, 404 restyle, single.html, SVG logo)
- Story 2.4: 1 HIGH (transition-colors violating §10), 3 MEDIUM fixed (external links, padding alignment)
- Story 2.1: Clean implementation, no review issues

**Technical Outcomes:**
- Google Fonts loaded (Literata, Hanken Grotesk, Commit Mono)
- Font tokens wired in Tailwind @theme block
- Nav redesigned: sticky, blur-on-scroll, mobile hamburger, accessible (WCAG)
- Hero partial: data-driven from content/_index.md frontmatter
- Section heading partial: reusable mono-uppercase component
- Footer: typography-first, menu-driven links, license attribution
- 404 page restyled with design tokens
- SVG logo integrated (debarquin.svg)

### Stories Completed

**Story 2.1: Update Base Layout & Typography** ✅
- Google Fonts preconnect + stylesheet link in head.html
- Font tokens wired in main.css @theme block (explicit stacks, not self-references)
- baseof.html: replaced bg-gray-50 with bg-surface token, added font-body class
- Applied font-heading to hero and section headings
- Agent: Opus 4.6 | Review: clean, no issues

**Story 2.2: Redesign Navigation** ✅
- Complete rewrite of nav.html to DESIGN-SPEC §6.2
- Alpine.js scroll detection: transparent → blur + border on scroll (no transitions per §9)
- Mobile hamburger with x-cloak, escape key close, aria-controls
- Menu-driven links from hugo.yaml
- Agent: Opus 4.6 | Review: 4 HIGH accessibility fixes applied

**Story 2.3: Build Homepage Hero & Content Structure** ✅
- Created content/_index.md with hero frontmatter
- Created hero.html partial (data-driven, {{ with }} guards)
- Created section-heading.html partial (dict interface)
- Rebuilt index.html: removed TailBliss P1-P5, added hero + 3 placeholder sections
- Removed TailBliss p1-p5 and social_media params from hugo.yaml
- Post-review: nav sticky positioning, hero semantic HTML, 404 restyle, single.html cleanup
- Agent: Opus 4.6 | Review: scope expanded (documented, Nicolas-directed)

**Story 2.4: Redesign Footer** ✅
- Complete rewrite of footer.html to DESIGN-SPEC §6.7
- Typography-first: Literata (name), Hanken Grotesk (location), Commit Mono (links/trust)
- Menu-driven links from hugo.yaml, license attribution (Apache 2.0 + CC-BY 4.0)
- Responsive flex-col/sm:flex-row
- Agent: Haiku 4.5 | Review: 1 HIGH (transition violation), 3 MEDIUM fixed

### Stories Added (Epic 2 Extension)

**Story 2.5: Rename `pearl` → `block` across codebase and docs** (pending)
- CSS token: `--pearl` → `--block-color`
- Frontmatter: `pearls`/`pearlCount` → `blocks`/`blockCount`
- Partials: `pearl-meta.html` → `block-meta.html` (Epic 3 naming)
- Planning docs: DESIGN-SPEC (53), architecture (41), epics (43)
- Recommended model: Haiku (mechanical, structured)

**Story 2.6: Visual polish — close mockup gap** (pending)
- Adjust spacing/padding to match mockup whitespace rhythm
- Add meaningful placeholder content (not zeros)
- Hero: update to real bio text
- Footer: "Ixelles, Brussels", review link set
- Ensure sections breathe correctly without real content
- Recommended model: Opus (visual judgment, multi-file)

---

## What Went Well: Successes & Strengths

### DESIGN-SPEC as North Star
Every story cited specific DESIGN-SPEC sections (§2, §6.2, §6.7, §10). Implementations matched the spec. This commitment from Epic 1's retro was honored consistently.

### Code Review Process
Reviews caught real issues on every story — 4 accessibility problems (nav), semantic HTML issues (hero), DESIGN-SPEC violations (footer transitions). Fresh context matters more than model capability. The adversarial review approach works.

### Deployment Pipeline
Nicolas confirms the workflow is smooth and enjoyable: localhost:1313 preview → git push → Netlify auto-deploys. Zero friction. Each story merged and deployed incrementally.

### Build Stability
11 pages, sub-60ms builds, zero regressions across all 4 stories. Incremental approach prevented breakage.

---

## Challenges & Growth Areas

### Visual Gap Between Render and Mockup
The current Hugo render (screenshot captured) doesn't match the HTML mockup's whitespace, density, and content feel. The shell is structurally correct but doesn't feel "finished." Addressed by adding Story 2.6.

### Scope Creep in Story 2.3
Post-review fixes expanded to touch nav positioning, 404 page, single.html template, head.html preload — 5 files beyond original scope. This was intentional (Nicolas-directed to fix drift from mockup and leftover TailBliss remnants) but was not documented in the story as a scope adjustment.

**Lesson:** Document scope changes in real time in the Dev Agent Record.

### First-Pass Implementation Misses
Pattern across all stories: initial implementations consistently miss accessibility details (aria, focus-visible, escape key) and spec compliance (transition-colors). Code review catches these, but the pattern suggests dev stories should include explicit accessibility checklists.

### Model Assignment
Story 2.4 (Haiku) produced a DESIGN-SPEC violation that review caught. Discussion revealed this is normal — fresh context matters more than model size. Led to model optimization recipe (see below).

---

## Key Insights & Lessons Learned

### 1. Shell Must Match Mockup Before Moving On
Epic 2's promise was "site feels like a finished product shell." Visual comparison revealed the gap. Placeholder content (meaningful values, not zeros) and whitespace rhythm are part of the shell, not content seeding.

### 2. `Pearl` → `Block` — Metaphor Evolution
Nicolas identified that "pearl" (linear necklace, precious, sequential) constrains the conceptual model. "Block" (Lego, Minecraft, voxels, atoms) enables 3D compounding — the more blocks you have, the more options and potential. This is a naming change with large system-wide impact (371 occurrences) that must be completed before Epic 3.

**Vocabulary mapping:**
| Old | New |
|-----|-----|
| `--pearl` (CSS) | `--block-color` |
| `pearlCount` | `blockCount` |
| `pearl-meta.html` | `block-meta.html` |
| `pearls` (stats) | `blocks` |
| Evidence trail | stays (not block-specific) |
| Confidence | stays (not block-specific) |

### 3. Model Optimization Recipe
Discussion produced a model assignment strategy for token cost optimization:

| Task Type | Model | Rationale |
|-----------|-------|-----------|
| Story creation (SM) | Haiku | Structured, template-driven |
| Complex development | Opus | Architecture decisions, multi-file |
| Simple/mechanical dev | Haiku | Clear spec, single-file rewrites |
| Code review | Haiku | Adversarial checklist, fresh context |
| Apply review fixes | Haiku | Targeted edits, specific instructions |
| Retrospectives/planning | Opus | Synthesis, pattern recognition |

### 4. Screenshots > Mockup Refactoring
HTML mockups are ~250k chars on 8-9 lines (raw inline CSS). Instead of reformatting, capture PNG screenshots as visual milestones. Compare renders against screenshots during review. Screenshots saved to `_bmad-output/implementation-artifacts/`.

### 5. Document Scope Changes Live
Scope adjustments during development are healthy (Nicolas directed 2.3's expansion). They must be documented in the Dev Agent Record *when they happen*, not retroactively.

---

## Previous Retrospective Follow-Through (Epic 1)

| Commitment | Status | Evidence |
|-----------|--------|----------|
| Reference DESIGN-SPEC in every story | ✅ Honored | All 4 stories cited specific sections |
| Verify story completeness before merge | ⚠️ Partial | Reviews ran, but scope drift not flagged |
| Deploy incrementally | ✅ Honored | Each story merged, Netlify deploys |
| Retrospectives after each epic | ✅ Honored | This retro |
| Build validation first | ✅ Honored | pnpm run test passed for all stories |

**Score: 4/5 commitments honored.** Scope verification needs refinement — document adjustments, don't prevent them.

---

## Epic 3 Preview & Dependencies

### Epic 3: Block-Backed Content Publishing (renamed from Pearl-Backed)

**Stories:**
1. Create post archetypes & content structure
2. Build block-meta & confidence partials
3. Build evidence trail partial
4. Build post list & post detail pages
5. Create first real post with evidence trail

**Dependencies on Epic 2:**
- ✅ Font utilities working (Story 2.1)
- ✅ Design token colors working (Epic 1)
- ✅ Nav, hero, footer in place (Stories 2.2-2.4)
- ⏳ `pearl` → `block` rename completed (Story 2.5)
- ⏳ Shell visual polish matching mockup (Story 2.6)

**Cannot start Epic 3 until Stories 2.5 and 2.6 are complete.**

---

## Action Items & Commitments

### Epic 2 Extension (Critical Path)

| Story | Description | Model | Blocks |
|-------|-------------|-------|--------|
| **2.5** | Rename pearl → block (code + docs) | Haiku | Epic 3 start |
| **2.6** | Visual polish — close mockup gap | Opus | Epic 3 start |

### Process Improvements

| Item | Description |
|------|-------------|
| Model optimization | Apply Haiku/Opus recipe per task type |
| Scope documentation | Document live scope changes in Dev Agent Record |
| Visual milestones | Save PNG screenshots at epic milestones |

### Team Agreements (Updated)

1. Reference DESIGN-SPEC.md in every story *(kept)*
2. Deploy incrementally *(kept)*
3. Build validation before marking done *(kept)*
4. **NEW:** Document scope changes when they happen
5. **NEW:** Model assignment per task type (Haiku=structured, Opus=synthesis)
6. **NEW:** Compare against mockup screenshots before marking shell stories done

---

## Critical Path to Epic 3

```
Story 2.5: Rename pearl → block (Haiku)
    ↓
Story 2.6: Visual polish (Opus)
    ↓ (merge, deploy, screenshot)
Epic 2 → done, tag milestone
    ↓
Epic 3 Story creation (Haiku)
    ↓
Epic 3 Development begins
```

---

## Retrospective Closure

**Key Takeaways:**

1. **Epic 2 delivered the structure but not the feel.** Two polish stories extend the epic to close the visual gap.
2. **`pearl` → `block` is a significant naming evolution** that must propagate before Epic 3.
3. **Model optimization recipe** saves tokens without sacrificing quality — fresh context matters more than model size.
4. **Code review process is proven** — catches real issues every time, works across model pairings.
5. **Deployment pipeline is a strength** — localhost preview + git push is frictionless and enjoyable.

**Nicolas (Project Lead):** Excited by the progress. The deployment workflow feels great. The mockup comparison revealed the polish gap — better to fix it now than carry it forward. The `pearl` → `block` shift reflects a deeper understanding of how knowledge compounds.

---

**Retrospective Complete** ✅

Generated: 2026-02-19
Status: Epic 2 extended with Stories 2.5 + 2.6, sprint-status updated
