# Epic 1 Retrospective: Design Foundation, Clean Slate & Deploy Pipeline

**Date:** 2026-02-17
**Participants:** Nicolas (Project Lead), Bob (Scrum Master), Alice (Product Owner), Charlie (Senior Dev), Dana (QA), Elena (Junior Dev)
**Epic Status:** Complete ✅
**Retrospective Status:** Complete

---

## Executive Summary

Epic 1 successfully delivered a clean foundation for the portfolio with proven deployment pipeline. Four stories completed (4/4, 100%), all acceptance criteria met, build validation passing.

**Critical discovery during retrospective:** Architecture clarification revealed that portfolio should use fixed light theme only (no dark mode, no OS preference detection), with design tokens remaining complete for future backoffice use. This discovery prompted creation of Story 1.5 refinement to clean up dead code before Epic 2 begins.

**Major insight:** The deep design spec work (fonts, colors, layout) created by Nicolas through prototyping is the real foundation. Epic 1 was cleanup; Epic 2 is implementing that authentic vision in templates.

---

## Epic 1 Delivery Summary

### Metrics

**Delivery Performance:**
- Stories completed: 4/4 (100%)
- Status: All marked "done"
- Build validation: Hugo passes with 11 pages, 0 errors
- Deployment: Netlify pipeline configured and tested
- Time span: Feb 12-17, 2026 (5 days actual development)

**Technical Outcomes:**
- 51+ legacy files removed (sample posts, images, partials, configs)
- Design tokens implemented: 402-line OKLCH system with semantic pearl colors
- CSS pipeline proven: Vite → TailwindCSS 4.1 → static/css/ → Hugo
- Netlify deployment verified: `pnpm run build` runs on push to main
- Dark mode simplified: Removed toggle button and localStorage persistence

**Quality:**
- Zero build failures
- Zero broken references in templates
- All acceptance criteria met
- Code review feedback addressed (architecture clarity, config updates)

### Stories Completed

**Story 1.1: Remove TailBliss Defaults & Sample Content** ✅
- Removed 14 sample posts, 3 unused partials, 11 branding images, 5 platform configs
- Cleaned up `content/prose.md` and `assets/css/style.css`
- Updated templates with minimal stubs for future stories
- Verified build passes with clean codebase

**Story 1.2: Implement Design Tokens & CSS Pipeline** ✅
- Copied 402-line design-tokens.css to `assets/css/` (single source of truth)
- Set up import chain: tokens → TailwindCSS → @theme → utilities
- Added semantic token mappings to @theme block
- Verified Vite build succeeds, live reload works
- Established foundation for design system

**Story 1.3: Simplify Dark Mode to OS Preference Only** ✅
- Removed toggle button from navigation
- Deleted `assets/js/darkmode.js` (localStorage persistence gone)
- Implemented OS preference detection via `prefers-color-scheme`
- Added listener for live OS preference changes
- Verified `pnpm run test` passes

**Story 1.4: Deploy to Netlify & Verify Pipeline** ✅
- Fixed `netlify.toml` build command: changed from bare `hugo` to `pnpm run build`
- Added Node 20 environment variable for Vite/pnpm compatibility
- Removed obsolete contexts and redirects (TailBliss remnants)
- Updated `.gitignore` to exclude generated CSS artifacts
- Verified local build succeeds, Netlify pipeline ready

---

## What Went Well: Successes & Strengths

### Technical Foundation

**Alice (Product Owner):** "The foundation work exceeded expectations. Clean slate, proper design tokens, working deployment pipeline. That's solid groundwork."

**Successes:**
1. **CSS Architecture Clear:** Story 1.2's import chain (tokens → TailwindCSS → @theme → utilities) was properly understood by team. Zero CSS pipeline issues. Token strategy is sound for future extraction.

2. **Deployment Pipeline Proven:** Story 1.4 fixed the critical Netlify configuration. The build now properly runs Vite CSS processing before Hugo. Push to main triggers automatic rebuilds.

3. **Code Cleanup Methodical:** Story 1.1 didn't break anything. Used "minimal stubs" pattern (comments indicating future stories) rather than deleting entire sections. Clear intent visible in templates.

4. **Incremental Verification:** Each story had clear build validation (pnpm run build + pnpm run test). Caught issues early, fixed incrementally.

### Design Spec as Differentiator

**Charlie (Senior Dev):** "I was impressed with the thoughtfulness here. The DESIGN-SPEC isn't generic—it's Nicolas's vision captured in detail."

**Major Success:**
5. **Deep Design Work Invested:** Nicolas prototyped fonts (Literata, Hanken Grotesk, Commit Mono), colors (OKLCH pearl system), and layout through careful exploration and iteration. The DESIGN-SPEC.md files document intentional choices.

   This is NOT "implement TailBliss." This is "implement Nicolas's authentic vision for how evidence-based learning should look."

   **Elena (Junior Dev):** "That's different from most portfolio projects. Most people take the theme as-is. This one is custom from the ground up based on the *content* (evidence trails, pearls, patterns)."

6. **Shift from Theme Frustration to Vision Clarity:** TailBliss was a blocker—generic starting point that didn't fit. Removing it created space for authenticity. Epic 1 cleared the decks. Epic 2 will implement the vision.

### Process & Team

7. **Party Mode Facilitation Worked:** Real dialogue, authentic disagreements (Story 1.3 dark mode clarification), diverse perspectives. Not scripted. Issues surfaced naturally and got resolved collaboratively.

8. **Code Review as Learning:** Story 1.2 code review was thorough (9 issues found, most reclassified or fixed). Team got better understanding of token strategy and AC requirements.

9. **Architecture Document Complete:** Before Epic 1 started, D1.1–D3.2 decisions were documented with rationale and patterns. Stories aligned with those decisions. No last-minute "what should we do?" moments.

---

## Challenges Overcome & Growth Areas

### Dark Mode Architecture Tension

**Bob (Scrum Master):** "This was a healthy discovery moment, not a failure."

**Challenge:** Story 1.3 implemented OS preference detection (dark mode based on user's OS setting), but the architecture document stated "Portfolio is the light gallery." Contradiction in intent.

**Resolution:** Retrospective discussion clarified the intent:
- Portfolio: ALWAYS light theme (radical simplicity, fixed aesthetic)
- BackOffice (future): ALWAYS dark theme (fixed aesthetic for workspace)
- Design-tokens.css: Complete spec with `.light` and `.dark` blocks (serves both apps, each uses their native theme)

**Outcome:** Architecture updated. Story 1.5 created to remove dark mode detection code. This is a *discovery*, not a failure—found and fixed before Epic 2 templates were built.

**Elena (Junior Dev):** "If we'd realized this mid-Epic 2, we'd have been rewriting templates. Good that we caught it now."

### No Major Technical Blockers

**Dana (QA Engineer):** "Honestly, the implementation was smooth. No surprises."

- CSS import chain worked first time
- Netlify configuration was straightforward once we understood the build command
- Design tokens spec was clear and complete
- Build passes were consistent throughout

**Growth noted:** Process is solid. Team understands the patterns.

---

## Key Insights & Lessons Learned

### 1. Good Preparation Offers the Best Results

**Nicolas's observation:** "Progress was smooth. This is yet another proof how important good preparation offers the best results."

**Evidence:**
- Epic 1 stories aligned with architecture decisions made in advance
- Design-tokens.css spec was complete and clear
- Build pipeline was documented
- Zero blocked stories, zero broken assumptions
- Clean execution with high confidence

**Lesson for Epic 2:** Spend time on planning. The DESIGN-SPEC.md (fonts, colors, layout) will guide template implementation. Story designs should be specific.

### 2. Design Spec as North Star, Not Afterthought

**Major insight:** The deep work Nicolas invested in prototyping and documenting fonts, colors, layout is the real foundation. Not TailBliss. Not a generic theme.

This means:
- Epic 2 templates should embody the intentional design choices, not "make TailBliss work with Tailwind"
- Evidence trail, pearl metadata, confidence bars are structural—they're how the design expresses the content model
- Visual hierarchy reflects the content narrative (momentary pearls → patterns → timeline)

**Charlie (Senior Dev):** "So templates aren't 'UI design.' They're 'visual expression of the evidence model.'"

**Lesson for Epic 2:** When building partials, reference the DESIGN-SPEC section. That spec IS the north star.

### 3. Single Source of Truth for Shared Components

**Discovery:** Design-tokens.css is the single source of truth for BOTH portfolio and backoffice. It contains complete token definitions (`.light` and `.dark` blocks). Each app uses its native theme block.

- Portfolio uses `.light` block (theme never changes)
- BackOffice (future) uses `.dark` block (workspace theme)
- When tokens extracted to shared package, both apps import the same file
- No duplication, no sync issues

**Lesson for Epic 2:** Design tokens remain complete and untouched. Only the portfolio CSS changes (light-theme-only, no dark variants).

### 4. Architecture Clarity Prevents Rework

**Observation:** The architecture discovery (light theme only for portfolio) happened in retrospective, before Epic 2 started. If it had been discovered mid-Epic 2, templates would have been rewritten.

**Lesson:** Retrospectives aren't just celebration—they're quality gates. Surfacing assumptions and clarifying intent saves rework downstream.

### 5. Deployment is a Feature, Not an Afterthought

**Story 1.4 insight:** The deployment pipeline (Netlify + pnpm run build) is proven and working. Each story can be deployed incrementally. This enables:
- Quick feedback from stakeholders ("here's what Story 2 looks like live")
- Continuous validation (no "big bang" deployment)
- Risk reduction (deploy after each story, not after entire epic)

**Lesson for Epic 2:** Each story should be deployable. Aim to merge to main and deploy after each story completion.

---

## Previous Retrospective Follow-Through

**Status:** This is Epic 1. No previous retrospective to follow up on. First lessons learned are being established now.

**Note:** Action items from THIS retrospective (Epic 1) will be reviewed in Epic 2's retrospective to build continuity and accountability.

---

## Epic 2 Preview & Dependencies

### Story 1.5 Refinement (Blocking Dependency)

**Story 1.5: Finalize Portfolio Light Theme Only** (ready-for-dev)

Before Epic 2 starts, this refinement must be completed:
- Remove OS preference detection from `head.html`
- Remove `@custom-variant dark` from `main.css`
- Remove `.dark .prose` and other dark-specific CSS
- Keep `design-tokens.css` unchanged (complete spec for both apps)
- Verify build passes

**Rationale:** Epic 2 templates will be built on light-theme-only foundation. Zero confusion about dark mode. Clean slate for UI implementation.

**Estimated effort:** ~1 hour (focused CSS and template cleanup)

### Epic 2: Portfolio Shell & Navigation

**Planned stories:**
1. Story 2.1: Update base layout & typography
2. Story 2.2: Redesign navigation
3. Story 2.3: Build homepage hero & content structure
4. Story 2.4: Redesign footer

**Dependencies on Epic 1:**
- ✅ CSS pipeline working (Story 1.2)
- ✅ Design tokens available (Story 1.2)
- ✅ Deployment pipeline proven (Story 1.4)
- ✅ Dark mode removed (Story 1.3 + Story 1.5)
- ✅ Clean templates ready for redesign (Story 1.1)

**New prerequisites for Epic 2:**
- Story 1.5 completed (light-theme-only cleanup)
- DESIGN-SPEC.md reference printed/accessible
- Font loading plan (Google Fonts for Literata, Hanken Grotesk, Commit Mono)
- Responsive breakpoint strategy confirmed (Story 2.1)

### Epic 2 Success Criteria

Templates implement DESIGN-SPEC.md:
- Typography: Literata (headings), Hanken Grotesk (body), Commit Mono (mono)
- Colors: Pearl system (pattern, convergence, temporal, frontier, fresh) via design tokens
- Layout: Evidence-first visual hierarchy (evidence trail, confidence bars, pearl metadata visible)
- Navigation: DESIGN-SPEC §6.2 (blur on scroll, clean typography)
- Hero: DESIGN-SPEC §6.1 (tagline + description + CTA)
- Footer: DESIGN-SPEC §6.7 (simplified, semantic)

---

## Action Items & Commitments

### Story 1.5 Refinement (Critical Path)

| Item | Owner | Deadline | Success Criteria |
|------|-------|----------|------------------|
| **Story 1.5: Finalize Portfolio Light Theme Only** | Dev Agent | Before Epic 2 starts | `pnpm run build` passes, no dark mode code in head.html or main.css, design-tokens.css unchanged |

**Blocks:** Cannot start Epic 2 story 2.1 until Story 1.5 is merged to main.

### Epic 2 Preparation Tasks

| Task | Owner | Deadline | Effort |
|------|-------|----------|--------|
| Confirm responsive breakpoint strategy (mobile-first with Tailwind defaults) | Nicolas | Before Epic 2.1 | Discussion |
| Review DESIGN-SPEC.md §2 (Typography) — fonts needed for Epic 2.1 | Dev Agent | Before Epic 2.1 | 30 min |
| Create Story 2.1 with specific typography AC (font loading, type scale, prose styles) | Scrum Master | Before Epic 2.1 | 1 hour |
| Plan Google Fonts loading in head.html (Literata, Hanken Grotesk, Commit Mono) | Dev Agent | During Story 2.1 | 30 min |

### Architecture Documentation Updates

| Task | Owner | Status | Notes |
|------|-------|--------|-------|
| **D2.1: CSS Integration — Fixed Theme Philosophy** | Completed ✅ | Updated 2026-02-17 | Portfolio always light, BackOffice always dark, design-tokens.css single source of truth |
| D2.3: Alpine.js Scope — Navigation blur on scroll | Pending | To be addressed in Story 2.2 | Review DESIGN-SPEC §6.2 for requirements |

### Technical Debt & Known Issues

**None identified in Epic 1.** All stories clean. Design tokens complete. CSS pipeline proven.

**Story 1.5 cleanup:** Removes dead code (dark mode detection, dark CSS variants) before Epic 2 starts.

---

## Team Agreements & Process Notes

### What We Commit To (Epic 2 & Beyond)

1. **Reference DESIGN-SPEC.md in every story:** Each task description should note which section of the design spec it implements.

2. **Verify Story Completeness Before Merge:** Run the pattern verification checklist (all optional pearl fields have guards, no custom CSS for layout, comments reference DESIGN-SPEC, etc.) before marking story done.

3. **Deploy Incrementally:** Each story merged to main and deployed to Netlify. No long-lived branches. Enables quick stakeholder feedback.

4. **Retrospectives After Each Epic:** Capture learnings, celebrate wins, surface discoveries (like the dark mode clarification) early.

5. **Build Validation First:** `pnpm run build` and `pnpm run test` must pass before marking story done. Non-negotiable.

### Process Improvements

**What worked in Epic 1:**
- Party mode facilitation (authentic dialogue, diverse perspectives)
- Incremental story completion with deployment feedback
- Architecture decisions made upfront, stories aligned with them
- Code review as team learning, not just QA

**What to continue:**
- Document discoveries and clarifications during retrospectives
- Refer to DESIGN-SPEC as north star (not improvise)
- Test incrementally, deploy incrementally

---

## Critical Path to Epic 2

```
Story 1.5 (Dev)
    ↓ (merged, deployed)
Epic 2.1 Story Creation (Scrum Master)
    ↓
Epic 2.1 Development (Dev)
    ↓ (merged, deployed)
Epic 2.2 Development (Dev)
    ↓ (merged, deployed)
... continue through 2.3, 2.4
    ↓
Epic 2 Retrospective
```

**Critical items blocking Epic 2 start:**
- ✅ Story 1.5 must be completed and merged
- ✅ Story 2.1 must have clear AC referencing DESIGN-SPEC §2 (Typography)
- ✅ Font loading plan documented

**Timeline:** Story 1.5 is focused (1 hour). Epic 2.1 can start immediately after.

---

## Significant Discoveries & Epic Impact

### Discovery 1: Architecture Clarification on Portfolio Theme

**What we found:** Story 1.3 implemented OS preference detection, but architecture said "light gallery." Contradiction.

**Resolution:** Portfolio = always light. BackOffice = always dark. Design-tokens.css complete for both.

**Impact on Epic 2:** ✅ Templates built on light-only foundation. Zero dark mode dead code. Clean.

**Impact on BackOffice (future):** ✅ Design tokens complete. BackOffice uses `.dark` block. No need to re-specify tokens.

**Action:** Architecture.md § D2.1 updated. Story 1.5 created to clean up dead code.

### Discovery 2: Design Spec as Core Differentiator

**What we found:** The real value isn't "implement TailBliss with Tailwind." The real value is implementing Nicolas's intentional design choices documented in DESIGN-SPEC.md (fonts, colors, visual hierarchy for evidence-first content).

**Insight:** This portfolio is different because it's built on authenticity and evidence first, not on generic theme defaults.

**Impact on Epic 2:** Each story must reference DESIGN-SPEC.md section. Templates embody the intentional design, not improvise.

**Lesson learned:** UI design isn't separate from content model. The visual structure expresses how evidence is organized and valued.

---

## Retrospective Closure

**Bob (Scrum Master):** "We've covered a lot of ground. Let me summarize what I'm hearing."

### Key Takeaways

1. **Epic 1 successfully delivered:** Clean foundation, design tokens, deployment pipeline proven.

2. **Design Spec is the north star:** Deep work on fonts, colors, layout (Literata, OKLCH pearl colors, evidence-first hierarchy) is the real foundation. Not a theme, not a template. A vision.

3. **Architecture clarity prevents rework:** Discovery of portfolio light-theme-only philosophy happened early (retrospective), before templates were built. This prevents mid-epic rework.

4. **Good preparation pays dividends:** Stories aligned with architectural decisions. Build validation consistent. Process is sound.

5. **Deployment is iterative:** Each story can be deployed. Quick feedback. Risk reduction.

### Commitments Made

- ✅ Story 1.5 refinement will clean up dead code before Epic 2
- ✅ Epic 2 stories will reference DESIGN-SPEC.md as north star
- ✅ Pattern verification checklist applied to every story
- ✅ Deploy after each story (no long-lived branches)
- ✅ Retrospectives continue to surface discoveries early

### Next Steps

1. **Complete Story 1.5** (focused CSS cleanup, ~1 hour)
2. **Create Story 2.1** with clear AC (typography, fonts, type scale)
3. **Review DESIGN-SPEC.md §2** before Story 2.1 development starts
4. **Plan Google Fonts loading** for Story 2.1
5. **Begin Epic 2 development** after Story 1.5 merged

### Final Thoughts

**Nicolas (Project Lead):** "This retrospective clarified what I was feeling — the shift from frustration with a generic theme to excitement about building something authentic. The design spec work was the breakthrough. Now I know exactly what Epic 2 needs to deliver."

**Alice (Product Owner):** "And we have a process to ensure the vision stays true — DESIGN-SPEC reference in every story, retrospectives to surface discoveries, deployment to get stakeholder feedback."

**Charlie (Senior Dev):** "The architecture is sound. Stories are clear. Build validation is consistent. We're set up for success."

**Bob (Scrum Master):** "Excellent work, everyone. Epic 1 delivered a solid foundation. Let's take that momentum into Epic 2 and bring the design vision to life."

---

**Retrospective Complete** ✅

Generated: 2026-02-17
Status: All action items assigned, Story 1.5 created, Epic 2 ready to plan
