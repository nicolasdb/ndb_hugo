# Epic 3 Retrospective: Block-Backed Content Publishing

**Date:** 2026-02-26
**Participants:** Nicolas (Project Lead), Bob (Scrum Master), Alice (Product Owner), Charlie (Senior Dev), Dana (QA), Elena (Junior Dev)
**Epic Status:** Complete (all 5 stories done)
**Retrospective Status:** Complete

---

## Executive Summary

Epic 3 delivered all 5 stories (100% completion) with all acceptance criteria met. The portfolio now has a complete content publishing pipeline: post archetypes with page bundles, block metadata display, confidence bar with threshold colors, collapsible evidence trail, post list/detail pages, and one real published post proving the chain end-to-end.

**No significant discoveries requiring Epic 4 plan changes.** The plan is sound.

**Key decision:** Epic 4 Story 4.5 will use meta-content — the first pattern documents the manual content publishing workflow itself, serving as both sample content AND authoring documentation.

---

## Epic 3 Delivery Summary

### Metrics

**Delivery Performance:**
- Stories completed: 5/5 (100%)
- Build validation: 49 pages, 0 errors consistently across all stories
- Models used: Sonnet 4.6 (Stories 3.1, 3.2), Haiku 4.5 (Stories 3.3, 3.4, 3.5)
- Debug issues on first pass: 0 in 3 of 5 stories

**Quality:**
- Code reviews ran on all 5 stories
- Story 3.1: 3 issues (Docker-specific examples, draft flag, guidance comment)
- Story 3.2: Clean implementation
- Story 3.3: 5 issues (2 MEDIUM, 3 LOW — empty blocks guard, aria-expanded, SVG accessibility, docs)
- Story 3.4: 3 HIGH issues (scope creep with featured_image, date format inconsistency, evidence.yaml verification)
- Story 3.5: 2 issues (blockCount mismatch 7→6, dev record accuracy)

**Technical Outcomes:**
- Post archetype scaffolds page bundles with evidence.yaml sidecar
- Flat posts converted to page bundles (architecture D1.1 compliance)
- block-meta.html: shared renderer with dict context and graceful degradation
- confidence-bar.html: 4-tier threshold color system (frontier/convergence/pattern/fresh)
- evidence-trail.html: Alpine.js expand/collapse, semantic color mapping, safeCSS filter
- post-list-item.html: compact block-meta in list view
- posts/list.html and posts/single.html: section-specific overrides extending _default/ templates
- First real post (docker-journey) with 6 evidence blocks, confidence 72

### Stories Completed

**Story 3.1: Create Post Archetypes & Content Structure** ✅
- Archetype directory: `archetypes/posts/index.md` + `evidence.yaml`
- Flat posts converted to page bundles (docker-journey, sewer-museum)
- Agent: Sonnet 4.6 | Review: 3 fixes (generic examples, draft flag, guidance comment)

**Story 3.2: Build Block Meta & Confidence Partials** ✅
- `block-meta.html`: renders blockCount, timespan, patterns, confidence with dict context
- `confidence-bar.html`: 4-tier threshold colors per DESIGN-SPEC §3
- Graceful degradation verified on posts with/without block fields
- Agent: Sonnet 4.6 | Review: clean

**Story 3.3: Build Evidence Trail Partial** ✅
- `evidence-trail.html`: Alpine.js collapse/expand, semantic color tokens
- 6-color mapping: fresh, convergence, pattern, temporal, frontier, block
- safeCSS filter for dynamic CSS variable injection
- Agent: Haiku 4.5 | Review: 5 fixes (empty guard, aria, SVG, docs)

**Story 3.4: Build Post List & Post Detail Pages** ✅
- `post-list-item.html`: compact card with block-meta integration
- `posts/list.html`: section-specific override with pagination
- `posts/single.html`: block-meta below tags, evidence-trail after content, max-w-[65ch] prose
- Agent: Haiku 4.5 | Review: 3 HIGH fixes (scope creep, date format, evidence verification)

**Story 3.5: Create First Real Post with Evidence Trail** ✅
- docker-journey elevated to real post with full block frontmatter
- 6 evidence blocks spanning March 2024 – January 2025
- End-to-end pipeline validated: archetype → bundle → list → detail → evidence trail
- Agent: Haiku 4.5 | Review: 2 fixes (blockCount accuracy, dev record)

---

## What Went Well: Successes & Strengths

### Process Is Invisible
Nicolas's assessment: "the process works." Dev → review → commit → next. When the process disappears, it's working.

### Code Review as Quality Gate
Adversarial review caught real issues on every story — from accessibility (aria, SVG) to spec compliance (date formats, scope creep) to data accuracy (blockCount mismatch). The review process is proven and reliable.

### Partial Architecture
Every partial uses dict context, graceful degradation (`{{ with }}`/`{{ if }}` guards), and design token colors. Zero coupling between partials. The pattern established here (block-meta, confidence-bar, evidence-trail) directly informs Epic 4's pattern-card and timeline-moment partials.

### Model Assignment Recipe
Sonnet for complex/creative work (3-1 archetype design, 3-2 threshold system), Haiku for structured/mechanical work (3-3, 3-4, 3-5). Cost optimization without quality sacrifice.

### Zero-Debug Implementations
Stories 3-1, 3-3, and 3-5 had no debug issues on first implementation. Story specs with clear architecture references and interface contracts lead to clean first passes.

---

## Challenges & Growth Areas

### Scope Bleed Across Story Boundaries
- Story 3-3 integrated evidence-trail into `_default/single.html` (Story 3-4's scope)
- Story 3-4 added undocumented featured_image handling (removed in review)
- **Nicolas's verdict:** Healthy pragmatism. Review catches it. Not worth adding process overhead.

### Creator UX Visibility Gap
Nicolas couldn't experience the product holistically during Epic 3. The mechanics work but the "sandwich" isn't assembled yet. This is inherent to the bottom-up epic sequencing (mechanics → structure → content) rather than a process failure.

---

## Key Insights & Lessons Learned

### 1. The Process Works — Keep It Simple
The dev → review → commit cycle is smooth. No need to add ceremony. Code review is the real quality gate; scope documentation is nice-to-have, not mandatory.

### 2. Meta-Content for Epic 4
Nicolas's idea: the first pattern documents the manual content publishing workflow itself. This makes Epic 4's sample content genuinely valuable — it's both a test fixture AND authoring documentation. Dog-fooding the content model.

### 3. Creator UX Aspiration
Nicolas is eager to test the authoring experience: drafting posts, seeing patterns emerge, selecting timeline moments. Phase 0 delivers the "manual camera" version; the backoffice adds automation later. This aspiration should guide how we write Epic 4-5 sample content.

### 4. Partial Architecture as Reusable Pattern
The dict-context + graceful-degradation pattern from Epic 3 partials is the template for all future partials. Epic 4's pattern-card and timeline-moment should follow the same contract.

---

## Previous Retrospective Follow-Through (Epic 2)

| Commitment | Status | Evidence |
|-----------|--------|----------|
| Reference DESIGN-SPEC in every story | ✅ Honored | All 5 stories cite §3, D1.1, D2.2, D2.3 |
| Deploy incrementally | ✅ Honored | Each story merged to main |
| Build validation before marking done | ✅ Honored | 49 pages, 0 errors, all stories |
| Document scope changes live | ⬇️ Downgraded | Nicolas: healthy pragmatism, review catches it |
| Model assignment per task type | ✅ Honored | Sonnet (3-1, 3-2), Haiku (3-3, 3-4, 3-5) |
| Compare against mockup screenshots | ⏸️ N/A | No shell changes in Epic 3 |

**Score: 5/5 applicable commitments honored.** Scope documentation downgraded by deliberate choice.

---

## Epic 4 Preview & Dependencies

### Epic 4: Patterns Gallery & Growth Timeline (5 stories)

1. Create pattern content section & archetype
2. Build pattern card & pattern pages
3. Create timeline content section & partial
4. Wire all homepage content sections
5. Seed minimal sample content for template verification

### Dependencies on Epic 3 (all satisfied)

- ✅ confidence-bar.html ready for reuse on pattern detail pages
- ✅ block-meta partial pattern established (dict context, graceful degradation)
- ✅ Post list-item pattern informs pattern-card design
- ✅ Alpine.js expand/collapse pattern proven
- ✅ Evidence trail color mapping reusable for timeline colors

### Preparation Needed

- None. No technical blockers, no knowledge gaps. Epic 3 patterns carry directly.

### Epic 4 Decisions

- **Story 4.5 meta-content:** First pattern will be "manual-content-publishing" — documents the Hugo authoring workflow while being a real pattern with real evidence blocks. Timeline moments drawn from Epic 1-3 milestones.

---

## Action Items & Commitments

### Process Commitments (Updated)

1. Reference DESIGN-SPEC in every story *(kept)*
2. Deploy incrementally *(kept)*
3. Build validation before marking done *(kept)*
4. Model assignment per task type *(kept)*
5. ~~Document scope changes live~~ → **Downgraded:** nice-to-have, review is the real gate
6. **NEW:** Meta-content approach — sample content should be genuinely useful, not throwaway

### Epic 4 Story Creation Notes

- Story 4.5 sample content: include "manual-content-publishing" pattern with real evidence blocks tracing the authoring workflow discovery
- Timeline moments: use real project milestones from Epics 1-3

---

## Retrospective Closure

**Key Takeaways:**

1. **The process works** — invisible is the goal, and we're there
2. **Code review is the proven quality gate** — catches everything, every time
3. **Meta-content for Epic 4** — dog-food the content model, documentation IS the content
4. **Creator UX aspiration noted** — Phase 0 is the manual camera, backoffice adds autofocus
5. **No blockers for Epic 4** — patterns from Epic 3 carry forward directly

**Nicolas (Project Lead):** Patient but eager. Wants the sandwich. Epic 4 delivers the assembled experience; Epic 5 fills it with real content. The meta-content idea ensures Epic 4's sample content has lasting value.

---

**Retrospective Complete** ✅

Generated: 2026-02-26
Status: Epic 3 done, sprint-status updated
